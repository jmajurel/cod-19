{"ast":null,"code":"import _slicedToArray from \"/home/jfmajurel/Documents/cod-19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/jfmajurel/Documents/cod-19/src/Containers/Situation.js\";\nimport React, { useState, useEffect } from \"react\";\nimport situationService from \"../Services/situationService\";\nimport * as d3 from \"d3\";\n\nconst Situation = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        situations = _useState2[0],\n        setSituations = _useState2[1];\n\n  const width = 800;\n  const height = 400;\n  useEffect(() => {\n    function handleSituationsChange(newSituations) {\n      newSituations = newSituations.sort((a, b) => d3.ascending(a.timeStamp, b.timeStamp));\n      setSituations([...newSituations]);\n    }\n\n    situationService.getAllSituation().then(handleSituationsChange).catch(err => console.log(\"error: \" + err));\n  }, []);\n  useEffect(() => {\n    const margin = 10;\n    const padding = width * 0.05;\n    const barPadding = 5;\n    const barWidth = width / situations.length - barPadding; // format the data\n\n    console.log(\"d3\");\n    const svg = d3.select(\"svg.graph\").attr(\"viewBox\", [0, 0, width - padding * 2, height + padding * 2]);\n    const dataXRange = d3.extent(situations, d => Date.parse(d.timeStamp));\n    const yScale = d3.scaleLinear().domain([0, d3.max(situations, d => +d.activeCase)]).nice().range([height - margin, margin]);\n    var xScale = d3.scaleTime().range([margin, width - margin]).domain(dataXRange).nice();\n    var yAxis = d3.axisLeft().scale(yScale);\n    var xAxis = d3.axisBottom(xScale).ticks(d3.timeDay.every(5)).tickFormat(d3.timeFormat(\"%b %d, %Y\")).tickSizeInner(5).tickSizeOuter(5);\n    svg.append(\"g\").attr(\"fill\", \"purple\").selectAll(\"rect\").data(situations).enter().append(\"rect\").attr(\"x\", (d, idx) => xScale(Date.parse(d.timeStamp))).attr(\"width\", barWidth).attr(\"y\", d => yScale(d.activeCase)).attr(\"height\", d => yScale(0) - yScale(+d.activeCase));\n    const line = d3.line().x((d, idx) => xScale(Date.parse(d.timeStamp))).y(function (d) {\n      return yScale(+d.activeCase);\n    });\n    svg.append(\"path\").datum(situations).attr(\"fill\", \"none\").attr(\"stroke\", \"#001f3f\").attr(\"stroke-width\", 1.5).attr(\"d\", line);\n    svg.selectAll(\"circle\").data(situations).enter().append(\"circle\").attr(\"opacity\", \"0.7\").attr(\"cx\", function (d) {\n      return xScale(Date.parse(d.timeStamp));\n    }).attr(\"cy\", function (d) {\n      return yScale(d.activeCase);\n    }).attr(\"r\", function (d, i) {\n      return 4.5;\n    }).attr(\"id\", function (d) {\n      return d.id;\n    }).style(\"fill\", \"#001f3f\").on(\"mouseover touchenter\", function (d) {\n      d3.select(this).transition().duration(200).style(\"opacity\", \"0.2\");\n      svg.selectAll(\"#tooltip\").data([d]).enter().append(\"text\").attr(\"id\", \"tooltip\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"#001f3f\").text(function (d, i) {\n        return d.activeCase.toLocaleString();\n      }).attr(\"y\", function (d) {\n        return yScale(d.activeCase) - 10;\n      }).attr(\"x\", function (d) {\n        return xScale(Date.parse(d.timeStamp));\n      });\n    }).on(\"mouseout touchleave\", function (d) {\n      d3.select(this).transition().duration(200).style(\"opacity\", \"0.8\");\n      d3.select(\"#tooltip\").remove();\n    });\n    svg.append(\"g\").classed(\"xAxis\", true).attr(\"transform\", \"translate(\".concat(0, \", \", height - margin, \" )\")).call(xAxis).selectAll(\"text\").attr(\"x\", -30).attr(\"transform\", \"rotate(-40)\");\n    svg.append(\"g\").classed(\"yAxis\", true).attr(\"transform\", \"translate(\".concat(margin, \", \").concat(-margin / 2, \")\")).call(yAxis);\n    svg.append(\"text\").classed(\"axisLabel\", true).attr(\"transform\", \"translate(\" + (width / 2 - margin / 2) + \" ,\" + (height + margin * 7) + \")\").style(\"text-anchor\", \"middle\").style(\"fill\", \"black\").text(\"Date\");\n    d3.select(\"svg .yAxis\").append(\"text\").classed(\"axisLabel\", true).attr(\"transform\", \"translate(\".concat(-margin - padding * 2, \", \").concat(height / 2, \") rotate(-90)\")).style(\"text-anchor\", \"middle\").style(\"fill\", \"black\").text(\"People\");\n    d3.selectAll(\"svg text\").attr(\"font-size\", 13);\n    d3.selectAll(\"svg .axisLabel\").attr(\"font-size\", 20).attr(\"font-weight\", \"bold\");\n    d3.select(\"svg\").append(\"text\").classed(\"title\", true).attr(\"transform\", \"translate(\".concat(width / 2, \",\").concat(margin + padding / 6, \")\")).style(\"text-anchor\", \"middle\").style(\"font-weight\", \"bold\").style(\"font-size\", \"20\").style(\"fill\", \"black\").text(\"Number of active cases in the world over time\");\n    return () => {\n      const svg = d3.select(\"svg\");\n      svg.selectAll(\"g\").remove();\n      svg.selectAll(\"text\").remove();\n      svg.selectAll(\"path\").remove();\n      svg.selectAll(\"circle\").remove();\n    };\n  });\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    fill: \"red\",\n    className: \"graph\",\n    width: width,\n    height: height,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, \"This vizualization is based on public data from the\", \" \", React.createElement(\"a\", {\n    href: \"https://www.who.int/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, \"World Health Organization\")));\n};\n\nexport default Situation;","map":{"version":3,"sources":["/home/jfmajurel/Documents/cod-19/src/Containers/Situation.js"],"names":["React","useState","useEffect","situationService","d3","Situation","situations","setSituations","width","height","handleSituationsChange","newSituations","sort","a","b","ascending","timeStamp","getAllSituation","then","catch","err","console","log","margin","padding","barPadding","barWidth","length","svg","select","attr","dataXRange","extent","d","Date","parse","yScale","scaleLinear","domain","max","activeCase","nice","range","xScale","scaleTime","yAxis","axisLeft","scale","xAxis","axisBottom","ticks","timeDay","every","tickFormat","timeFormat","tickSizeInner","tickSizeOuter","append","selectAll","data","enter","idx","line","x","y","datum","i","id","style","on","transition","duration","text","toLocaleString","remove","classed","call"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,gBAAP,MAA6B,8BAA7B;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA,oBACcJ,QAAQ,CAAC,EAAD,CADtB;AAAA;AAAA,QACfK,UADe;AAAA,QACHC,aADG;;AAEtB,QAAMC,KAAK,GAAG,GAAd;AACA,QAAMC,MAAM,GAAG,GAAf;AACAP,EAAAA,SAAS,CAAC,MAAM;AACd,aAASQ,sBAAT,CAAgCC,aAAhC,EAA+C;AAC7CA,MAAAA,aAAa,GAAGA,aAAa,CAACC,IAAd,CAAmB,CAACC,CAAD,EAAIC,CAAJ,KACjCV,EAAE,CAACW,SAAH,CAAaF,CAAC,CAACG,SAAf,EAA0BF,CAAC,CAACE,SAA5B,CADc,CAAhB;AAGAT,MAAAA,aAAa,CAAC,CAAC,GAAGI,aAAJ,CAAD,CAAb;AACD;;AAEDR,IAAAA,gBAAgB,CACbc,eADH,GAEGC,IAFH,CAEQR,sBAFR,EAGGS,KAHH,CAGSC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,YAAYF,GAAxB,CAHhB;AAID,GAZQ,EAYN,EAZM,CAAT;AAcAlB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMqB,MAAM,GAAG,EAAf;AACA,UAAMC,OAAO,GAAGhB,KAAK,GAAG,IAAxB;AACA,UAAMiB,UAAU,GAAG,CAAnB;AACA,UAAMC,QAAQ,GAAGlB,KAAK,GAAGF,UAAU,CAACqB,MAAnB,GAA4BF,UAA7C,CAJc,CAKd;;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,UAAMM,GAAG,GAAGxB,EAAE,CACXyB,MADS,CACF,WADE,EAETC,IAFS,CAEJ,SAFI,EAEO,CAAC,CAAD,EAAI,CAAJ,EAAOtB,KAAK,GAAGgB,OAAO,GAAG,CAAzB,EAA4Bf,MAAM,GAAGe,OAAO,GAAG,CAA/C,CAFP,CAAZ;AAIA,UAAMO,UAAU,GAAG3B,EAAE,CAAC4B,MAAH,CAAU1B,UAAV,EAAsB2B,CAAC,IAAIC,IAAI,CAACC,KAAL,CAAWF,CAAC,CAACjB,SAAb,CAA3B,CAAnB;AACA,UAAMoB,MAAM,GAAGhC,EAAE,CACdiC,WADY,GAEZC,MAFY,CAEL,CAAC,CAAD,EAAIlC,EAAE,CAACmC,GAAH,CAAOjC,UAAP,EAAmB2B,CAAC,IAAI,CAACA,CAAC,CAACO,UAA3B,CAAJ,CAFK,EAGZC,IAHY,GAIZC,KAJY,CAIN,CAACjC,MAAM,GAAGc,MAAV,EAAkBA,MAAlB,CAJM,CAAf;AAMA,QAAIoB,MAAM,GAAGvC,EAAE,CACZwC,SADU,GAEVF,KAFU,CAEJ,CAACnB,MAAD,EAASf,KAAK,GAAGe,MAAjB,CAFI,EAGVe,MAHU,CAGHP,UAHG,EAIVU,IAJU,EAAb;AAMA,QAAII,KAAK,GAAGzC,EAAE,CAAC0C,QAAH,GAAcC,KAAd,CAAoBX,MAApB,CAAZ;AAEA,QAAIY,KAAK,GAAG5C,EAAE,CACX6C,UADS,CACEN,MADF,EAETO,KAFS,CAEH9C,EAAE,CAAC+C,OAAH,CAAWC,KAAX,CAAiB,CAAjB,CAFG,EAGTC,UAHS,CAGEjD,EAAE,CAACkD,UAAH,CAAc,WAAd,CAHF,EAITC,aAJS,CAIK,CAJL,EAKTC,aALS,CAKK,CALL,CAAZ;AAOA5B,IAAAA,GAAG,CACA6B,MADH,CACU,GADV,EAEG3B,IAFH,CAEQ,MAFR,EAEgB,QAFhB,EAGG4B,SAHH,CAGa,MAHb,EAIGC,IAJH,CAIQrD,UAJR,EAKGsD,KALH,GAMGH,MANH,CAMU,MANV,EAOG3B,IAPH,CAOQ,GAPR,EAOa,CAACG,CAAD,EAAI4B,GAAJ,KAAYlB,MAAM,CAACT,IAAI,CAACC,KAAL,CAAWF,CAAC,CAACjB,SAAb,CAAD,CAP/B,EAQGc,IARH,CAQQ,OARR,EAQiBJ,QARjB,EASGI,IATH,CASQ,GATR,EASaG,CAAC,IAAIG,MAAM,CAACH,CAAC,CAACO,UAAH,CATxB,EAUGV,IAVH,CAUQ,QAVR,EAUkBG,CAAC,IAAIG,MAAM,CAAC,CAAD,CAAN,GAAYA,MAAM,CAAC,CAACH,CAAC,CAACO,UAAJ,CAVzC;AAWA,UAAMsB,IAAI,GAAG1D,EAAE,CACZ0D,IADU,GAEVC,CAFU,CAER,CAAC9B,CAAD,EAAI4B,GAAJ,KAAYlB,MAAM,CAACT,IAAI,CAACC,KAAL,CAAWF,CAAC,CAACjB,SAAb,CAAD,CAFV,EAGVgD,CAHU,CAGR,UAAS/B,CAAT,EAAY;AACb,aAAOG,MAAM,CAAC,CAACH,CAAC,CAACO,UAAJ,CAAb;AACD,KALU,CAAb;AAMAZ,IAAAA,GAAG,CACA6B,MADH,CACU,MADV,EAEGQ,KAFH,CAES3D,UAFT,EAGGwB,IAHH,CAGQ,MAHR,EAGgB,MAHhB,EAIGA,IAJH,CAIQ,QAJR,EAIkB,SAJlB,EAKGA,IALH,CAKQ,cALR,EAKwB,GALxB,EAMGA,IANH,CAMQ,GANR,EAMagC,IANb;AAQAlC,IAAAA,GAAG,CACA8B,SADH,CACa,QADb,EAEGC,IAFH,CAEQrD,UAFR,EAGGsD,KAHH,GAIGH,MAJH,CAIU,QAJV,EAKG3B,IALH,CAKQ,SALR,EAKmB,KALnB,EAMGA,IANH,CAMQ,IANR,EAMc,UAASG,CAAT,EAAY;AACtB,aAAOU,MAAM,CAACT,IAAI,CAACC,KAAL,CAAWF,CAAC,CAACjB,SAAb,CAAD,CAAb;AACD,KARH,EASGc,IATH,CASQ,IATR,EASc,UAASG,CAAT,EAAY;AACtB,aAAOG,MAAM,CAACH,CAAC,CAACO,UAAH,CAAb;AACD,KAXH,EAYGV,IAZH,CAYQ,GAZR,EAYa,UAASG,CAAT,EAAYiC,CAAZ,EAAe;AACxB,aAAO,GAAP;AACD,KAdH,EAeGpC,IAfH,CAeQ,IAfR,EAec,UAASG,CAAT,EAAY;AACtB,aAAOA,CAAC,CAACkC,EAAT;AACD,KAjBH,EAkBGC,KAlBH,CAkBS,MAlBT,EAkBiB,SAlBjB,EAmBGC,EAnBH,CAmBM,sBAnBN,EAmB8B,UAASpC,CAAT,EAAY;AACtC7B,MAAAA,EAAE,CAACyB,MAAH,CAAU,IAAV,EACGyC,UADH,GAEGC,QAFH,CAEY,GAFZ,EAGGH,KAHH,CAGS,SAHT,EAGoB,KAHpB;AAKAxC,MAAAA,GAAG,CACA8B,SADH,CACa,UADb,EAEGC,IAFH,CAEQ,CAAC1B,CAAD,CAFR,EAGG2B,KAHH,GAIGH,MAJH,CAIU,MAJV,EAKG3B,IALH,CAKQ,IALR,EAKc,SALd,EAMGA,IANH,CAMQ,aANR,EAMuB,MANvB,EAOGA,IAPH,CAOQ,MAPR,EAOgB,SAPhB,EAQG0C,IARH,CAQQ,UAASvC,CAAT,EAAYiC,CAAZ,EAAe;AACnB,eAAOjC,CAAC,CAACO,UAAF,CAAaiC,cAAb,EAAP;AACD,OAVH,EAWG3C,IAXH,CAWQ,GAXR,EAWa,UAASG,CAAT,EAAY;AACrB,eAAOG,MAAM,CAACH,CAAC,CAACO,UAAH,CAAN,GAAuB,EAA9B;AACD,OAbH,EAcGV,IAdH,CAcQ,GAdR,EAca,UAASG,CAAT,EAAY;AACrB,eAAOU,MAAM,CAACT,IAAI,CAACC,KAAL,CAAWF,CAAC,CAACjB,SAAb,CAAD,CAAb;AACD,OAhBH;AAiBD,KA1CH,EA2CGqD,EA3CH,CA2CM,qBA3CN,EA2C6B,UAASpC,CAAT,EAAY;AACrC7B,MAAAA,EAAE,CAACyB,MAAH,CAAU,IAAV,EACGyC,UADH,GAEGC,QAFH,CAEY,GAFZ,EAGGH,KAHH,CAGS,SAHT,EAGoB,KAHpB;AAKAhE,MAAAA,EAAE,CAACyB,MAAH,CAAU,UAAV,EAAsB6C,MAAtB;AACD,KAlDH;AAoDA9C,IAAAA,GAAG,CACA6B,MADH,CACU,GADV,EAEGkB,OAFH,CAEW,OAFX,EAEoB,IAFpB,EAGG7C,IAHH,CAGQ,WAHR,sBAGkC,CAHlC,QAGwCrB,MAAM,GAAGc,MAHjD,SAIGqD,IAJH,CAIQ5B,KAJR,EAKGU,SALH,CAKa,MALb,EAMG5B,IANH,CAMQ,GANR,EAMa,CAAC,EANd,EAOGA,IAPH,CAOQ,WAPR,EAOqB,aAPrB;AASAF,IAAAA,GAAG,CACA6B,MADH,CACU,GADV,EAEGkB,OAFH,CAEW,OAFX,EAEoB,IAFpB,EAGG7C,IAHH,CAGQ,WAHR,sBAGkCP,MAHlC,eAG6C,CAACA,MAAD,GAAU,CAHvD,QAIGqD,IAJH,CAIQ/B,KAJR;AAMAjB,IAAAA,GAAG,CACA6B,MADH,CACU,MADV,EAEGkB,OAFH,CAEW,WAFX,EAEwB,IAFxB,EAGG7C,IAHH,CAII,WAJJ,EAKI,gBACGtB,KAAK,GAAG,CAAR,GAAYe,MAAM,GAAG,CADxB,IAEE,IAFF,IAGGd,MAAM,GAAGc,MAAM,GAAG,CAHrB,IAIE,GATN,EAWG6C,KAXH,CAWS,aAXT,EAWwB,QAXxB,EAYGA,KAZH,CAYS,MAZT,EAYiB,OAZjB,EAaGI,IAbH,CAaQ,MAbR;AAeApE,IAAAA,EAAE,CAACyB,MAAH,CAAU,YAAV,EACG4B,MADH,CACU,MADV,EAEGkB,OAFH,CAEW,WAFX,EAEwB,IAFxB,EAGG7C,IAHH,CAII,WAJJ,sBAKiB,CAACP,MAAD,GAAUC,OAAO,GAAG,CALrC,eAK2Cf,MAAM,GAAG,CALpD,oBAOG2D,KAPH,CAOS,aAPT,EAOwB,QAPxB,EAQGA,KARH,CAQS,MART,EAQiB,OARjB,EASGI,IATH,CASQ,QATR;AAWApE,IAAAA,EAAE,CAACsD,SAAH,CAAa,UAAb,EAAyB5B,IAAzB,CAA8B,WAA9B,EAA2C,EAA3C;AAEA1B,IAAAA,EAAE,CAACsD,SAAH,CAAa,gBAAb,EACG5B,IADH,CACQ,WADR,EACqB,EADrB,EAEGA,IAFH,CAEQ,aAFR,EAEuB,MAFvB;AAIA1B,IAAAA,EAAE,CAACyB,MAAH,CAAU,KAAV,EACG4B,MADH,CACU,MADV,EAEGkB,OAFH,CAEW,OAFX,EAEoB,IAFpB,EAGG7C,IAHH,CAGQ,WAHR,sBAGkCtB,KAAK,GAAG,CAH1C,cAG+Ce,MAAM,GAAGC,OAAO,GAAG,CAHlE,QAIG4C,KAJH,CAIS,aAJT,EAIwB,QAJxB,EAKGA,KALH,CAKS,aALT,EAKwB,MALxB,EAMGA,KANH,CAMS,WANT,EAMsB,IANtB,EAOGA,KAPH,CAOS,MAPT,EAOiB,OAPjB,EAQGI,IARH,CAQQ,+CARR;AAUA,WAAO,MAAM;AACX,YAAM5C,GAAG,GAAGxB,EAAE,CAACyB,MAAH,CAAU,KAAV,CAAZ;AACAD,MAAAA,GAAG,CAAC8B,SAAJ,CAAc,GAAd,EAAmBgB,MAAnB;AACA9C,MAAAA,GAAG,CAAC8B,SAAJ,CAAc,MAAd,EAAsBgB,MAAtB;AAEA9C,MAAAA,GAAG,CAAC8B,SAAJ,CAAc,MAAd,EAAsBgB,MAAtB;AAEA9C,MAAAA,GAAG,CAAC8B,SAAJ,CAAc,QAAd,EAAwBgB,MAAxB;AACD,KARD;AASD,GAhLQ,CAAT;AAkLA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,IAAI,EAAC,KAAV;AAAgB,IAAA,SAAS,EAAC,OAA1B;AAAkC,IAAA,KAAK,EAAElE,KAAzC;AAAgD,IAAA,MAAM,EAAEC,MAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DACsD,GADtD,EAEE;AAAG,IAAA,IAAI,EAAC,sBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAFF,CAFF,CADF;AASD,CA7MD;;AA+MA,eAAeJ,SAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport situationService from \"../Services/situationService\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst Situation = () => {\r\n  const [situations, setSituations] = useState([]);\r\n  const width = 800;\r\n  const height = 400;\r\n  useEffect(() => {\r\n    function handleSituationsChange(newSituations) {\r\n      newSituations = newSituations.sort((a, b) =>\r\n        d3.ascending(a.timeStamp, b.timeStamp)\r\n      );\r\n      setSituations([...newSituations]);\r\n    }\r\n\r\n    situationService\r\n      .getAllSituation()\r\n      .then(handleSituationsChange)\r\n      .catch(err => console.log(\"error: \" + err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const margin = 10;\r\n    const padding = width * 0.05;\r\n    const barPadding = 5;\r\n    const barWidth = width / situations.length - barPadding;\r\n    // format the data\r\n    console.log(\"d3\");\r\n    const svg = d3\r\n      .select(\"svg.graph\")\r\n      .attr(\"viewBox\", [0, 0, width - padding * 2, height + padding * 2]);\r\n\r\n    const dataXRange = d3.extent(situations, d => Date.parse(d.timeStamp));\r\n    const yScale = d3\r\n      .scaleLinear()\r\n      .domain([0, d3.max(situations, d => +d.activeCase)])\r\n      .nice()\r\n      .range([height - margin, margin]);\r\n\r\n    var xScale = d3\r\n      .scaleTime()\r\n      .range([margin, width - margin])\r\n      .domain(dataXRange)\r\n      .nice();\r\n\r\n    var yAxis = d3.axisLeft().scale(yScale);\r\n\r\n    var xAxis = d3\r\n      .axisBottom(xScale)\r\n      .ticks(d3.timeDay.every(5))\r\n      .tickFormat(d3.timeFormat(\"%b %d, %Y\"))\r\n      .tickSizeInner(5)\r\n      .tickSizeOuter(5);\r\n\r\n    svg\r\n      .append(\"g\")\r\n      .attr(\"fill\", \"purple\")\r\n      .selectAll(\"rect\")\r\n      .data(situations)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"x\", (d, idx) => xScale(Date.parse(d.timeStamp)))\r\n      .attr(\"width\", barWidth)\r\n      .attr(\"y\", d => yScale(d.activeCase))\r\n      .attr(\"height\", d => yScale(0) - yScale(+d.activeCase));\r\n    const line = d3\r\n      .line()\r\n      .x((d, idx) => xScale(Date.parse(d.timeStamp)))\r\n      .y(function(d) {\r\n        return yScale(+d.activeCase);\r\n      });\r\n    svg\r\n      .append(\"path\")\r\n      .datum(situations)\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke\", \"#001f3f\")\r\n      .attr(\"stroke-width\", 1.5)\r\n      .attr(\"d\", line);\r\n\r\n    svg\r\n      .selectAll(\"circle\")\r\n      .data(situations)\r\n      .enter()\r\n      .append(\"circle\")\r\n      .attr(\"opacity\", \"0.7\")\r\n      .attr(\"cx\", function(d) {\r\n        return xScale(Date.parse(d.timeStamp));\r\n      })\r\n      .attr(\"cy\", function(d) {\r\n        return yScale(d.activeCase);\r\n      })\r\n      .attr(\"r\", function(d, i) {\r\n        return 4.5;\r\n      })\r\n      .attr(\"id\", function(d) {\r\n        return d.id;\r\n      })\r\n      .style(\"fill\", \"#001f3f\")\r\n      .on(\"mouseover touchenter\", function(d) {\r\n        d3.select(this)\r\n          .transition()\r\n          .duration(200)\r\n          .style(\"opacity\", \"0.2\");\r\n\r\n        svg\r\n          .selectAll(\"#tooltip\")\r\n          .data([d])\r\n          .enter()\r\n          .append(\"text\")\r\n          .attr(\"id\", \"tooltip\")\r\n          .attr(\"font-weight\", \"bold\")\r\n          .attr(\"fill\", \"#001f3f\")\r\n          .text(function(d, i) {\r\n            return d.activeCase.toLocaleString();\r\n          })\r\n          .attr(\"y\", function(d) {\r\n            return yScale(d.activeCase) - 10;\r\n          })\r\n          .attr(\"x\", function(d) {\r\n            return xScale(Date.parse(d.timeStamp));\r\n          });\r\n      })\r\n      .on(\"mouseout touchleave\", function(d) {\r\n        d3.select(this)\r\n          .transition()\r\n          .duration(200)\r\n          .style(\"opacity\", \"0.8\");\r\n\r\n        d3.select(\"#tooltip\").remove();\r\n      });\r\n\r\n    svg\r\n      .append(\"g\")\r\n      .classed(\"xAxis\", true)\r\n      .attr(\"transform\", `translate(${0}, ${height - margin} )`)\r\n      .call(xAxis)\r\n      .selectAll(\"text\")\r\n      .attr(\"x\", -30)\r\n      .attr(\"transform\", \"rotate(-40)\");\r\n\r\n    svg\r\n      .append(\"g\")\r\n      .classed(\"yAxis\", true)\r\n      .attr(\"transform\", `translate(${margin}, ${-margin / 2})`)\r\n      .call(yAxis);\r\n\r\n    svg\r\n      .append(\"text\")\r\n      .classed(\"axisLabel\", true)\r\n      .attr(\r\n        \"transform\",\r\n        \"translate(\" +\r\n          (width / 2 - margin / 2) +\r\n          \" ,\" +\r\n          (height + margin * 7) +\r\n          \")\"\r\n      )\r\n      .style(\"text-anchor\", \"middle\")\r\n      .style(\"fill\", \"black\")\r\n      .text(\"Date\");\r\n\r\n    d3.select(\"svg .yAxis\")\r\n      .append(\"text\")\r\n      .classed(\"axisLabel\", true)\r\n      .attr(\r\n        \"transform\",\r\n        `translate(${-margin - padding * 2}, ${height / 2}) rotate(-90)`\r\n      )\r\n      .style(\"text-anchor\", \"middle\")\r\n      .style(\"fill\", \"black\")\r\n      .text(\"People\");\r\n\r\n    d3.selectAll(\"svg text\").attr(\"font-size\", 13);\r\n\r\n    d3.selectAll(\"svg .axisLabel\")\r\n      .attr(\"font-size\", 20)\r\n      .attr(\"font-weight\", \"bold\");\r\n\r\n    d3.select(\"svg\")\r\n      .append(\"text\")\r\n      .classed(\"title\", true)\r\n      .attr(\"transform\", `translate(${width / 2},${margin + padding / 6})`)\r\n      .style(\"text-anchor\", \"middle\")\r\n      .style(\"font-weight\", \"bold\")\r\n      .style(\"font-size\", \"20\")\r\n      .style(\"fill\", \"black\")\r\n      .text(\"Number of active cases in the world over time\");\r\n\r\n    return () => {\r\n      const svg = d3.select(\"svg\");\r\n      svg.selectAll(\"g\").remove();\r\n      svg.selectAll(\"text\").remove();\r\n\r\n      svg.selectAll(\"path\").remove();\r\n\r\n      svg.selectAll(\"circle\").remove();\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <svg fill=\"red\" className=\"graph\" width={width} height={height} />\r\n      <p>\r\n        This vizualization is based on public data from the{\" \"}\r\n        <a href=\"https://www.who.int/\">World Health Organization</a>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Situation;\r\n"]},"metadata":{},"sourceType":"module"}